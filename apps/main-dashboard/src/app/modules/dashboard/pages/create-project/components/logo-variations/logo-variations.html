<!-- Initial Prompt State -->
@if (shouldShowInitialPrompt()) {
  <div class="flex items-center justify-center p-6 min-h-[78vh]">
    <div class="max-w-2xl w-full text-center space-y-8">
      <!-- Header -->
      <div class="space-y-4">
        <div
          class="w-20 h-20 mx-auto bg-linear-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mb-6 glow-primary"
        >
          <i class="pi pi-palette text-3xl text-white"></i>
        </div>

        <h1 class="text-4xl font-bold text-light-text text-glow-primary">
          {{ 'dashboard.logoVariations.initial.title' | translate }}
        </h1>

        <p class="text-xl text-light-text/80 leading-relaxed">
          {{ 'dashboard.logoVariations.initial.subtitle' | translate }}
        </p>
      </div>

      <!-- Features List -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-12">
        <div class="glass-card p-6 text-left">
          <div class="flex items-start space-x-4">
            <div
              class="w-12 h-12 rounded-lg flex items-center justify-center shrink-0 glow-primary"
            >
              <i class="pi pi-sun text-primary text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-light-text mb-2">
                {{ 'dashboard.logoVariations.features.lightBackground.title' | translate }}
              </h3>
              <p class="text-light-text/70 text-sm">
                {{ 'dashboard.logoVariations.features.lightBackground.description' | translate }}
              </p>
            </div>
          </div>
        </div>

        <div class="glass-card p-6 text-left">
          <div class="flex items-start space-x-4">
            <div
              class="w-12 h-12 bg-accent/20 rounded-lg flex items-center justify-center shrink-0 glow-accent"
            >
              <i class="pi pi-moon text-accent text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-light-text mb-2">
                {{ 'dashboard.logoVariations.features.darkBackground.title' | translate }}
              </h3>
              <p class="text-light-text/70 text-sm">
                {{ 'dashboard.logoVariations.features.darkBackground.description' | translate }}
              </p>
            </div>
          </div>
        </div>

        <div class="glass-card p-6 text-left">
          <div class="flex items-start space-x-4">
            <div
              class="w-12 h-12 bg-secondary/20 rounded-lg flex items-center justify-center shrink-0 glow-secondary"
            >
              <i class="pi pi-circle text-secondary text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-light-text mb-2">
                {{ 'dashboard.logoVariations.features.monochrome.title' | translate }}
              </h3>
              <p class="text-light-text/70 text-sm">
                {{ 'dashboard.logoVariations.features.monochrome.description' | translate }}
              </p>
            </div>
          </div>
        </div>

        <div class="glass-card p-6 text-left">
          <div class="flex items-start space-x-4">
            <div
              class="w-12 h-12 bg-primary/20 rounded-lg flex items-center justify-center shrink-0 glow-primary"
            >
              <i class="pi pi-sparkles text-primary text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-light-text mb-2">
                {{ 'dashboard.logoVariations.features.multipleFormats.title' | translate }}
              </h3>
              <p class="text-light-text/70 text-sm">
                {{ 'dashboard.logoVariations.features.multipleFormats.description' | translate }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Button -->
      <div class="pt-8">
        <button (click)="startVariationGeneration()" class="inner-button px-8 py-4">
          <i class="pi pi-play mr-2"></i>
          {{ 'dashboard.logoVariations.buttons.generate' | translate }}
        </button>
      </div>

      <!-- Estimated Time -->
      <p class="text-sm text-light-text/60">
        <i class="pi pi-clock mr-1"></i>
        {{ 'dashboard.logoVariations.estimatedTime' | translate: { time: estimatedTime() } }}
      </p>
    </div>
  </div>
}

<!-- Loading State -->
@if (shouldShowLoader()) {
  <section
    class="sm:min-h-[90vh] flex flex-col items-center justify-center w-full px-4 mt-[80px] sm:mt-0"
  >
    <div class="text-center mb-8">
      <h1
        class="text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-gray-100 mb-4 max-w-4xl"
      >
        {{ 'dashboard.logoVariations.generating.title' | translate }}
      </h1>
      <p class="text-gray-400 sm:text-lg text-sm max-w-2xl mx-auto">
        {{ 'dashboard.logoVariations.generating.subtitle' | translate }}
      </p>
    </div>

    <div class="w-full max-w-7xl mx-auto">
      <!-- Loading Carousel -->
      <app-carousel
        [items]="[1, 2, 3]"
        [selectedItem]="null"
        [trackByFn]="trackSkeleton"
        [gridCols]="3"
        [showDots]="true"
        [showArrows]="false"
        [infinite]="false"
      >
        <ng-template let-item>
          <div class="p-4 sm:p-6 border-2 border-gray-700/50 glass rounded-xl">
            <div
              class="w-full h-32 mb-4 bg-gray-800/50 rounded-xl flex items-center justify-center"
            >
              <div class="w-16 h-16 bg-gray-700/50 rounded-lg animate-pulse"></div>
            </div>
            <div class="h-5 bg-gray-700/50 rounded animate-pulse mb-2"></div>
            <div class="h-4 bg-gray-700/30 rounded animate-pulse w-2/3"></div>
          </div>
        </ng-template>
      </app-carousel>
    </div>

    <!-- Progress Bar -->
    <div class="w-full max-w-2xl mx-auto mt-8">
      <div class="flex justify-between text-sm text-gray-400 mb-2">
        <span>{{ 'dashboard.logoVariations.progress.label' | translate }}</span>
        <span>{{ generationProgress() }}%</span>
      </div>
      <div class="w-full bg-gray-800 rounded-full h-3">
        <div
          class="bg-linear-to-r from-primary to-secondary h-3 rounded-full transition-all duration-500"
          [style.width.%]="generationProgress()"
        ></div>
      </div>
    </div>

    <!-- Generation Steps -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
      <div class="glass-card p-6 text-center">
        <div
          class="w-16 h-16 mx-auto bg-primary/20 rounded-full flex items-center justify-center mb-4 glow-primary"
        >
          <i class="pi pi-sun text-primary text-2xl"></i>
        </div>
        <h3 class="text-lg font-semibold text-light-text mb-2">
          {{ 'dashboard.logoVariations.features.lightBackground.title' | translate }}
        </h3>
        <p class="text-sm text-light-text/70">
          {{ 'dashboard.logoVariations.features.lightBackground.description' | translate }}
        </p>
      </div>

      <div class="glass-card p-6 text-center">
        <div
          class="w-16 h-16 mx-auto bg-accent/20 rounded-full flex items-center justify-center mb-4 glow-accent"
        >
          <i class="pi pi-moon text-accent text-2xl"></i>
        </div>
        <h3 class="text-lg font-semibold text-light-text mb-2">
          {{ 'dashboard.logoVariations.features.darkBackground.title' | translate }}
        </h3>
        <p class="text-sm text-light-text/70">
          {{ 'dashboard.logoVariations.features.darkBackground.description' | translate }}
        </p>
      </div>

      <div class="glass-card p-6 text-center">
        <div
          class="w-16 h-16 mx-auto bg-secondary/20 rounded-full flex items-center justify-center mb-4 glow-secondary"
        >
          <i class="pi pi-circle text-secondary text-2xl"></i>
        </div>
        <h3 class="text-lg font-semibold text-light-text mb-2">
          {{ 'dashboard.logoVariations.features.monochrome.title' | translate }}
        </h3>
        <p class="text-sm text-light-text/70">
          {{ 'dashboard.logoVariations.features.monochrome.description' | translate }}
        </p>
      </div>
    </div>
  </section>
}

<!-- Error State -->
@if (error()) {
  <div class="flex items-center justify-center p-6 min-h-[78vh]">
    <div class="max-w-2xl w-full text-center space-y-8">
      <div class="space-y-4">
        <div
          class="w-20 h-20 mx-auto bg-danger/20 rounded-2xl flex items-center justify-center mb-6"
        >
          <i class="pi pi-exclamation-triangle text-3xl text-danger"></i>
        </div>

        <h2 class="text-3xl font-bold text-light-text">
          {{ 'dashboard.logoVariations.errors.title' | translate }}
        </h2>

        <p class="text-lg text-danger">{{ error() }}</p>
      </div>

      <!-- Retry Button -->
      <div class="pt-8">
        <button
          (click)="startVariationGeneration()"
          class="outer-button px-8 py-4 bg-danger/20 border-danger/30 hover:bg-danger/30"
        >
          <i class="pi pi-refresh mr-2"></i>
          {{ 'dashboard.logoVariations.buttons.retry' | translate }}
        </button>
      </div>
    </div>
  </div>
}

<!-- Variations Display -->
@if (shouldShowVariations()) {
  <div class="p-6 min-h-[78vh]">
    <div class="max-w-6xl mx-auto space-y-8">
      <!-- Header -->
      <div class="text-center space-y-4">
        @if (isCompleted()) {
          <div
            class="w-20 h-20 mx-auto bg-success/20 rounded-2xl flex items-center justify-center mb-6 glow-success"
          >
            <i class="pi pi-check text-3xl text-success"></i>
          </div>
          <h2 class="text-3xl font-bold text-light-text text-glow-success">
            {{ 'dashboard.logoVariations.success.completed' | translate }}
          </h2>
          <p class="text-lg text-light-text/80">
            {{ 'dashboard.logoVariations.success.reviewAndProceed' | translate }}
          </p>
        } @else {
          <h2 class="text-3xl font-bold text-light-text text-glow-primary">
            {{ 'dashboard.logoVariations.success.title' | translate }}
          </h2>
          <p class="text-lg text-light-text/80">
            {{ 'dashboard.logoVariations.success.subtitle' | translate }}
          </p>
        }
      </div>

      <!-- Variations Display (Simplified to 3 variations) -->
      <div class="space-y-8">
        <!-- Direct display of all 3 variations -->
        <app-carousel
          [items]="getAllVariations()"
          [selectedItem]="null"
          [trackByFn]="trackVariation"
          [gridCols]="3"
          [showDots]="true"
          [showArrows]="false"
          [infinite]="false"
        >
          <ng-template let-variation let-index="index" let-isSelected="isSelected">
            <div class="glass-card p-6 transition-all duration-300">
              <!-- Variation Preview -->
              <div
                class="w-full h-48 rounded-lg flex items-center justify-center mb-4 border-2 border-glass-border"
                [style.background-color]="variation.backgroundColor"
              >
                <div
                  class="w-32 h-32 flex items-center justify-center"
                  [innerHTML]="variation.svgContent | safeHtml"
                ></div>
              </div>

              <!-- Variation Info -->
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <h4 class="text-lg font-semibold text-light-text">{{ variation.label }}</h4>
                  <div
                    class="w-6 h-6 bg-success rounded-full flex items-center justify-center glow-success"
                  >
                    <i class="pi pi-check text-white text-sm"></i>
                  </div>
                </div>

                <p class="text-sm text-light-text/70">{{ variation.description }}</p>

                <!-- Auto-Generated Indicator -->
                <div class="pt-2">
                  <span
                    class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-success/20 text-success"
                  >
                    <i class="pi pi-check mr-1"></i>
                    {{ 'dashboard.logoVariations.status.generated' | translate }}
                  </span>
                </div>
              </div>
            </div>
          </ng-template>
        </app-carousel>
      </div>

      <!-- Manual Proceed Section -->
      @if (!isCompleted()) {
        <div class="glass-card p-6 text-center">
          <p class="text-lg text-light-text mb-4">
            <i class="pi pi-check-circle text-success mr-2"></i>
            {{ 'dashboard.logoVariations.status.processing' | translate }}
          </p>
          <div class="inline-flex items-center space-x-2 text-light-text/70">
            <i class="pi pi-spin pi-spinner"></i>
            <span>{{ 'dashboard.logoVariations.status.preparingNext' | translate }}</span>
          </div>
        </div>
      }
    </div>
  </div>
}
