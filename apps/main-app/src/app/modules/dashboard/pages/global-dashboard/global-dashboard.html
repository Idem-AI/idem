<div class="min-h-screen text-white flex flex-col mt-16">
  <!-- MAIN CONTENT -->
  <div class="flex-1 flex px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4 md:py-6">
    <main
      class="flex-1 space-y-6 sm:space-y-8 lg:space-y-10 overflow-y-auto max-w-7xl mx-auto w-full"
    >
      @if (isLoading()) {
      <div class="flex justify-center items-center h-64">
        <app-loader />
      </div>
      } @else {
      <!-- Header with tabs -->
      <section class="space-y-4">
        <div class="flex items-center justify-between">
          <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold">Dashboard</h1>
        </div>

        <!-- Tabs -->
        <div class="flex gap-4 border-b border-white/10">
          <button
            (click)="switchTab('projects')"
            class="px-6 py-3 font-medium transition-all duration-200 relative"
            [class]="
              activeTab() === 'projects'
                ? 'text-primary border-b-2 border-primary'
                : 'text-gray-400 hover:text-white'
            "
          >
            <i class="pi pi-folder mr-2"></i>
            Projects
            <span
              class="ml-2 px-2 py-1 text-xs rounded-full"
              [class]="
                activeTab() === 'projects' ? 'bg-primary/20 text-primary' : 'bg-white/10 text-gray-400'
              "
            >
              {{ projects().length }}
            </span>
          </button>

          <button
            (click)="switchTab('teams')"
            class="px-6 py-3 font-medium transition-all duration-200 relative"
            [class]="
              activeTab() === 'teams'
                ? 'text-primary border-b-2 border-primary'
                : 'text-gray-400 hover:text-white'
            "
          >
            <i class="pi pi-users mr-2"></i>
            Teams
            <span
              class="ml-2 px-2 py-1 text-xs rounded-full"
              [class]="
                activeTab() === 'teams' ? 'bg-primary/20 text-primary' : 'bg-white/10 text-gray-400'
              "
            >
              {{ teams().length }}
            </span>
          </button>
        </div>
      </section>

      <!-- Projects Tab -->
      @if (activeTab() === 'projects') {
      <!-- Recent Projects -->
      <section class="space-y-4">
        <div class="flex items-center justify-between">
          <h2 class="text-xl sm:text-2xl lg:text-3xl font-semibold text-primary">
            Recent Projects
          </h2>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
          <!-- Create Project Card -->
          <button
            (click)="openCreateProject()"
            class="h-[200px] sm:h-[220px] lg:h-[240px] flex flex-col justify-center items-center text-center border-2 border-dashed border-secondary/50 rounded-xl glass hover:bg-white/5 hover:shadow-[0_0_20px_-5px_var(--color-primary)] hover:scale-[1.01] transition-all duration-300 p-4 hover:cursor-pointer group"
          >
            <div
              class="w-12 h-12 mb-3 bg-primary/20 rounded-full flex items-center justify-center group-hover:bg-primary/30 transition"
            >
              <i class="pi pi-plus text-primary text-2xl"></i>
            </div>
            <div class="font-bold text-sm sm:text-base">Create a new project</div>
            <div class="text-xs sm:text-sm text-gray-400 group-hover:text-white transition-colors">
              Start a new project
            </div>
          </button>

          <!-- Recent Project Cards -->
          @for (project of recentProjects(); track project.id) {
          <app-project-card [project]="project" />
          }
        </div>
      </section>

      <!-- All Projects -->
      <section class="space-y-4 sm:space-y-6">
        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
          <h2 class="text-xl sm:text-2xl font-semibold text-primary">All Projects</h2>
        </div>

        <div class="grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          @for (project of projects(); track project.id) {
          <app-project-card [project]="project" />
          } @empty {
          <div
            class="col-span-full text-center py-12 sm:py-16 border-2 border-dashed border-gray-800 rounded-xl"
          >
            <i class="pi pi-folder text-3xl sm:text-4xl text-gray-600 mb-3"></i>
            <div class="text-gray-400 text-sm sm:text-base mb-2">No projects available</div>
            <button
              (click)="openCreateProject()"
              class="text-primary text-sm sm:text-base inline-block transition-colors outer-button"
            >
              Create a project
            </button>
          </div>
          }
        </div>
      </section>
      }

      <!-- Teams Tab -->
      @if (activeTab() === 'teams') {
      <!-- Recent Teams -->
      <section class="space-y-4">
        <div class="flex items-center justify-between">
          <h2 class="text-xl sm:text-2xl lg:text-3xl font-semibold text-primary">Recent Teams</h2>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
          <!-- Create Team Card -->
          <button
            (click)="openCreateTeam()"
            class="h-[200px] sm:h-[220px] lg:h-[240px] flex flex-col justify-center items-center text-center border-2 border-dashed border-secondary/50 rounded-xl glass hover:bg-white/5 hover:shadow-[0_0_20px_-5px_var(--color-primary)] hover:scale-[1.01] transition-all duration-300 p-4 hover:cursor-pointer group"
          >
            <div
              class="w-12 h-12 mb-3 bg-primary/20 rounded-full flex items-center justify-center group-hover:bg-primary/30 transition"
            >
              <i class="pi pi-plus text-primary text-2xl"></i>
            </div>
            <div class="font-bold text-sm sm:text-base">Create a new team</div>
            <div class="text-xs sm:text-sm text-gray-400 group-hover:text-white transition-colors">
              Start collaborating
            </div>
          </button>

          <!-- Recent Team Cards -->
          @for (team of recentTeams(); track team.id) {
          <div
            (click)="openTeamDetails(team.id!)"
            class="h-[200px] sm:h-[220px] lg:h-[240px] glass-card p-6 flex flex-col justify-between hover:shadow-[0_0_20px_-5px_var(--color-primary)] hover:scale-[1.01] transition-all duration-300 cursor-pointer group"
          >
            <div>
              <div class="flex items-start justify-between mb-3">
                <div
                  class="w-12 h-12 bg-accent/20 rounded-full flex items-center justify-center group-hover:bg-accent/30 transition"
                >
                  <i class="pi pi-users text-accent text-xl"></i>
                </div>
                <span
                  class="px-2 py-1 text-xs rounded-full"
                  [class]="getRoleBadgeColor(team.members[0]?.role || 'member')"
                >
                  {{ team.members[0]?.role || 'Member' }}
                </span>
              </div>
              <h3 class="text-lg font-bold mb-2 truncate group-hover:text-primary transition">
                {{ team.name }}
              </h3>
              <p class="text-sm text-gray-400 line-clamp-2">
                {{ team.description || 'No description' }}
              </p>
            </div>
            <div class="flex items-center justify-between text-xs text-gray-400">
              <div class="flex items-center gap-2">
                <i class="pi pi-users"></i>
                <span>{{ getMemberCount(team) }} members</span>
              </div>
            </div>
          </div>
          }
        </div>
      </section>

      <!-- All Teams -->
      <section class="space-y-4 sm:space-y-6">
        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
          <h2 class="text-xl sm:text-2xl font-semibold text-primary">All Teams</h2>
        </div>

        <div class="grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          @for (team of teams(); track team.id) {
          <div
            (click)="openTeamDetails(team.id!)"
            class="h-[200px] sm:h-[220px] lg:h-[240px] glass-card p-6 flex flex-col justify-between hover:shadow-[0_0_20px_-5px_var(--color-primary)] hover:scale-[1.01] transition-all duration-300 cursor-pointer group"
          >
            <div>
              <div class="flex items-start justify-between mb-3">
                <div
                  class="w-12 h-12 bg-accent/20 rounded-full flex items-center justify-center group-hover:bg-accent/30 transition"
                >
                  <i class="pi pi-users text-accent text-xl"></i>
                </div>
                <span
                  class="px-2 py-1 text-xs rounded-full"
                  [class]="getRoleBadgeColor(team.members[0]?.role || 'member')"
                >
                  {{ team.members[0]?.role || 'Member' }}
                </span>
              </div>
              <h3 class="text-lg font-bold mb-2 truncate group-hover:text-primary transition">
                {{ team.name }}
              </h3>
              <p class="text-sm text-gray-400 line-clamp-2">
                {{ team.description || 'No description' }}
              </p>
            </div>
            <div class="flex items-center justify-between text-xs text-gray-400">
              <div class="flex items-center gap-2">
                <i class="pi pi-users"></i>
                <span>{{ getMemberCount(team) }} members</span>
              </div>
            </div>
          </div>
          } @empty {
          <div
            class="col-span-full text-center py-12 sm:py-16 border-2 border-dashed border-gray-800 rounded-xl"
          >
            <i class="pi pi-users text-3xl sm:text-4xl text-gray-600 mb-3"></i>
            <div class="text-gray-400 text-sm sm:text-base mb-2">No teams available</div>
            <button
              (click)="openCreateTeam()"
              class="text-primary text-sm sm:text-base inline-block transition-colors outer-button"
            >
              Create a team
            </button>
          </div>
          }
        </div>
      </section>
      } }
    </main>
  </div>
</div>
